name: Validate mappings

on: [pull_request]

jobs:
  validate:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4
      - run: pip install pyyaml
      - run: |
          python - <<EOF
          import yaml, sys
          data = yaml.safe_load(open("data/mappings.yaml"))
          for cat, items in data.items():
              for i, item in enumerate(items):
                  assert "display_name" in item
                  assert "aliases" in item and len(item["aliases"]) > 0
                  assert "link" in item
          EOF

